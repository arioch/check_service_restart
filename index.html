<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Check service restart by arioch</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Check service restart</h1>
        <p>A plugin for Icinga and Nagios that warns you if any services need to be restarted after applying package updates</p>

        <p class="view"><a href="https://github.com/arioch/check_service_restart">View the Project on GitHub <small>arioch/check_service_restart</small></a></p>


        <ul>
          <li><a href="https://github.com/arioch/check_service_restart/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/arioch/check_service_restart/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/arioch/check_service_restart">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="install-plugin" class="anchor" href="#install-plugin" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install plugin</h1>

<h2>
<a id="icinga-nagios" class="anchor" href="#icinga-nagios" aria-hidden="true"><span class="octicon octicon-link"></span></a>Icinga, Nagios</h2>

<p>Add the snippet below to /etc/icinga/objects/commands.cfg or /etc/nagios/objects/commands.cfg:</p>

<pre><code>define command{
    command_name    check_service_restart
    command_line    $USER1$/check_service_restart
}
</code></pre>

<h2>
<a id="icinga2" class="anchor" href="#icinga2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Icinga2</h2>

<pre><code>apply Service "check_service_restart" to Host {
  import "generic-service"
  display_name = "Service restart"
  assign where "linux-servers" in host.groups
  ignore where host.name == "localhost"
  check_command = "by_ssh"
  vars.by_ssh_command = "sudo /usr/lib64/nagios/plugins/check_service_restart"
  vars.by_ssh_logname = "root"
}
</code></pre>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/arioch">arioch</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>